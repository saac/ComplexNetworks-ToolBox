import sys
from matplotlib import *

import networkx as nx
from networkx.algorithms import bipartite

#import csv

def leer(results):
  data = []
  ENTRADA = open(results,"r")

  for linea in ENTRADA:
    cadena = linea.split()
    data.append(cadena)
  ENTRADA.close()
  
  return data  ## areglo de lineas
  

data = leer(sys.argv[1])

k = 1
m = int(data[0][2])
ini = 0
fin = 0

for i in data:
  if( i[0]=='*Nodes'):
    ini = k
  elif( i[0]=='*Links'):
    fin = k    
  k = k+1  
 
A = [] #Arreglo de duplas (Comunidad,Genes)
B = [] #Arreglo de Temporal ???  
M = [] #Arreglo de listas de Comundiades (cada una con sus genes)

for i in range(ini,fin-1,1):
  mod = data[i][0].split(":")
  gen = data[i][1].replace('"','')
  
  A.append((mod[0], gen))

B = nx.Graph()
nodesComs = []
nodesGenes = []


for i in A:
  nodesComs.append(i[0])
  nodesGenes.append(i[1])

B.add_nodes_from(nodesComs, bipartite=0)
B.add_nodes_from(nodesGenes, bipartite=1)

for i in A:
  B.add_edges_from([i]) 
  

nx.draw_networkx(B)  
  
#print nx.is_connected(B)
#bottom_nodes, top_nodes = bipartite.sets(B)

#print list(top_nodes)
#print list(bottom_nodes)

#print B.edges()

#print bipartite.sets(B)
#print "\n\n\n"
#print bipartite.color(B)
